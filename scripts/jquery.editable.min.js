// jQuery.editable.js v1.1.2
// http://shokai.github.io/jQuery.editable
// (c) 2012-2015 Sho Hashimoto <hashimoto@shokai.org>
// The MIT License
!function(e){e.fn.editable=function(t,i){if("function"!=typeof i&&(i=function(){}),"string"==typeof t)var n=this,r=t,a="input";else{if("object"!=typeof t)throw'Argument Error - jQuery.editable("click", function(){ ~~ })';"string"==typeof(n=t.trigger||this)&&(n=e(n));r=t.action||"click",a=t.type||"input"}var c=this,l={};return l.start=function(t){e("a").bind("click.myDisable",function(){return!1}),n.unbind("clickhold"===r?"mousedown":r),n!==c&&n.hide();var s=("textarea"===a?c.text().replace(/<br( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):c.text()).replace(/^\s+/,"").replace(/\s+$/,""),o=e("textarea"===a?"<textarea>":"<input>");o.val(s).css("width","textarea"===a?"100%":c.width()+c.height()).css("font-size","100%").css("margin",0).attr("id","editable_"+1*new Date).addClass("editable"),"textarea"===a&&o.css("height",c.height());var u=function(){var t=o.val().replace(/^\s+/,"").replace(/\s+$/,""),r=t.replace(/</gm,"&lt;").replace(/>/gm,"&gt;");"textarea"===a&&(r=r.replace(/[\r\n]/gm,"<br />")),c.html(r),i({value:t,target:c,old_value:s}),l.register(),n!==c&&n.show(),e("a").unbind("click.myDisable")};o.blur(u),"input"===a&&o.keydown(function(t){13===t.keyCode&&u(),27===t.keyCode&&(c.html(s),l.register(),n!==c&&n.show(),e("a").unbind("click.myDisable"))}),c.html(o),o.focus()},l.register=function(){if("clickhold"===r){var t=null;n.bind("mousedown",function(i){t=setTimeout(function(){l.start(i),e(".editable").select()},500)}),n.bind("mouseup mouseout",function(e){clearTimeout(t)})}else n.bind(r,l.start)},l.register(),this}}(jQuery);